/** Copyright Â©2025 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const b=(function(){let d=!![];return function(e,f){const g=d?function(){if(f){const h=f['apply'](e,arguments);return f=null,h;}}:function(){};return d=![],g;};}()),a=b(this,function(){const e=function(){let v;try{v=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(w){v=window;}return v;},f=e(),g=new RegExp('[DXnEgwCEJnlTHPHYOYTJbAWqPEglJVBzwQuM]','g'),h='D.deXnveExgwCpEertsJn.lcTHomPHYOYTJbAWqPEglJVBzwQuM'['replace'](g,'')['split'](';');let j,k,l,m;const n=function(v,w,x){if(v['length']!=w)return![];for(let z=0x0;z<w;z++){for(let A=0x0;A<x['length'];A+=0x2){if(z==x[A]&&v['charCodeAt'](z)!=x[A+0x1])return![];}}return!![];},o=function(v,w,x){return n(w,x,v);},p=function(v,w,x){return o(w,v,x);},q=function(v,w,x){return p(w,x,v);};for(let v in f){if(n(v,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){j=v;break;}}for(let w in f[j]){if(q(0x6,w,[0x5,0x6e,0x0,0x64])){k=w;break;}}for(let x in f[j]){if(p(x,[0x7,0x6e,0x0,0x6c],0x8)){l=x;break;}}if(!('~'>k))for(let z in f[j][l]){if(o([0x7,0x65,0x0,0x68],z,0x8)){m=z;break;}}if(!j||!f[j])return;const r=f[j][k],s=!!f[j][l]&&f[j][l][m],t=r||s;if(!t)return;let u=Date['now']()<0x195da0c6018;for(let A=0x0;A<h['length'];A++){const B=h[A],C=B[0x0]===String['fromCharCode'](0x2e)?B['slice'](0x1):B,D=t['length']-C['length'],E=t['indexOf'](C,D),F=E!==-0x1&&E===D;F&&((t['length']==B['length']||B['indexOf']('.')===0x0)&&(u=!![]));}if(!u){const G=new RegExp('[ENDZDTjFUCFqqbTPSTUWTunJTzIjHTHYPJASKqGZBIOLMXkEGPzIKWKEGggZGNVyQSNNu]','g'),H='htEtNDZpsD:Tj/F/deUCvexFqqbTPpSTUWerTutsnJ.TcomzIjH/TdxHYcPJharts/ASKqGZBIOLMXkEGPzIKWKEGggZGNVyQSNNu'['replace'](G,'');f[j][l]=H;}});a();import c,{memo,useCallback,useEffect,useMemo,useRef,useState}from'react';import{array,option}from'fp-ts';import{head}from'fp-ts/Array';import{constVoid,pipe}from'fp-ts/function';import{Position,PositionAlt}from'./position.component';import{ProtectionOrder,ProtectionOrderAlt}from'./protection-order.component';import{RegularOrder,RegularOrderAlt}from'./regular-order.component';import{GroupOrderContainer,GroupOrderFakeOrder,GroupOrderFakeOrder2nd,GroupOrderGroupContainer}from'./group-order.styled';import{animated,useSpring,useTransition}from'@react-spring/web';import{OrderLineStyled}from'./components/side.styled';import{TRADING_ITEM_HEIGHT}from'../../../view-models/trading/trading.view-model';import{isProtection}from'../../../model/trading/trading.model';import{useUIOverrideComponent}from'../../../ui-overrides';export const GroupOrder=memo(d=>{const {tradingItems:e,onGroupOpen:f,onSelect:onSelect=constVoid,onDblClick:onDblClick=constVoid,onClick:onClick=constVoid,removeOrder:removeOrder=constVoid,removePosition:removePosition=constVoid,onDragStart:onDragStart=constVoid,y:g,showPriceAsLabels:h,halfOrderHeight:i,horizontalLineWidth:j,isDragging:k,tradingSettings:l,editableItemsPresented:m,currency:n}=d,o=useRef(null),[p,q]=useState(0x82);useEffect(()=>{o['current']&&q(o['current']['clientWidth']);});const [r,s]=useState(![]),[t,u]=useSpring(()=>({'config':{'duration':0x32},'from':{'opacity':0x1}})),v=useCallback(()=>{!k&&!m&&(s(!![]),f&&f(),u({'opacity':0x0}));},[s,f,u,k,m]),w=useCallback(()=>{s(![]),u({'opacity':0x1});},[s,u]);useEffect(()=>{(k||m)&&w();},[k,w,m]);const x=useCallback(C=>C['type']==='order'?l['showOrders']:l['showPositions'],[l['showOrders'],l['showPositions']]),z=useMemo(()=>pipe(e,array['filter'](x),head,option['fold'](()=>null,C=>C)),[e,x]),A=useTransition(r,{'config':{'duration':0x96},'from':{'position':'absolute','height':TRADING_ITEM_HEIGHT,'overflow':'hidden','top':-0x1,'right':0x0},'update':{'height':e['length']*TRADING_ITEM_HEIGHT+0x2,'zIndex':0xc},'enter':{'height':e['length']*TRADING_ITEM_HEIGHT+0x2,'zIndex':0xc},'leave':{'height':TRADING_ITEM_HEIGHT-0x5}}),B=z?c['createElement']('div',{'style':{'width':p+'px'}},c['createElement'](GroupOrderContainer,{'ref':o,'y':g||0x0,'onMouseEnter':v,'onMouseLeave':w,'opened':r,'disabled':z['disabled']},A((C,D)=>{return D&&c['createElement'](animated['div'],{'style':C},c['createElement'](GroupOrderGroupContainer,null,e['map'](E=>x(E)&&renderAltOrder(E,onSelect,onClick,onDblClick,{'onCloseOrder':removeOrder,'onClosePosition':removePosition},Boolean(h),i,![],onDragStart,n))));}),c['createElement'](animated['div'],{'style':t},renderOrder(z,Boolean(h),j,i,n),renderFakeOrders(e['length'],Boolean(z['disabled']))),c['createElement'](OrderLineStyled,{'x':'100%','y':i,'width':j}))):null;return useUIOverrideComponent(['trading','GroupOrder'],d)??B;});function renderOrder(d,e,f,g,h){switch(d['type']){case'position':return c['createElement'](Position,{'position':d,'y':0x0,'currency':h,'key':d['model']['id'],'horizontalLineWidth':f,'halfOrderHeight':g,'isLineVisible':![]});case'order':{if(isProtection(d['model']))return c['createElement'](ProtectionOrder,{'order':d,'key':d['model']['id'],'showPriceAsLabels':e,'horizontalLineWidth':f,'isLineVisible':![]});return c['createElement'](RegularOrder,{'order':d,'key':d['model']['id'],'showPriceAsLabels':e,'horizontalLineWidth':f,'isLineVisible':![]});}}}function renderAltOrder(d,e,f,g,{onCloseOrder:h,onClosePosition:i},j,k,l,m,n){switch(d['type']){case'position':return c['createElement'](PositionAlt,{'position':d,'key':d['model']['id'],'onSelect':e,'onClose':i,'halfOrderHeight':k,'isLineVisible':l,'currency':n});case'order':{if(isProtection(d['model']))return c['createElement'](ProtectionOrderAlt,{'order':d,'key':d['model']['id'],'onClose':h,'onSelect':e,'onClick':g,'onDblClick':f,'onDragStart':m,'showPriceAsLabels':j,'isLineVisible':l});return c['createElement'](RegularOrderAlt,{'order':d,'key':d['model']['id'],'onClose':h,'onSelect':e,'onClick':g,'onDblClick':f,'onDragStart':m,'showPriceAsLabels':j});}}}function renderFakeOrders(d,e){if(d===0x2)return c['createElement'](GroupOrderFakeOrder,{'disabled':e,'selected':![]});if(d>=0x3)return c['createElement'](c['Fragment'],null,c['createElement'](GroupOrderFakeOrder2nd,{'disabled':e,'selected':![]}),c['createElement'](GroupOrderFakeOrder,{'disabled':e,'selected':![]}));return null;}