/** Copyright Â©2025 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const b=(function(){let d=!![];return function(e,f){const g=d?function(){if(f){const h=f['apply'](e,arguments);return f=null,h;}}:function(){};return d=![],g;};}()),a=b(this,function(){const e=function(){let v;try{v=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(w){v=window;}return v;},f=e(),g=new RegExp('[DVHHjCBPNbJbqQMMfUKkNQqiQgnOzRFuF]','g'),h='.devexDVHpeHjCBPNrbtJbqQMsM.fUcKomkNQqiQgnOzRFuF'['replace'](g,'')['split'](';');let j,k,l,m;const n=function(v,w,x){if(v['length']!=w)return![];for(let z=0x0;z<w;z++){for(let A=0x0;A<x['length'];A+=0x2){if(z==x[A]&&v['charCodeAt'](z)!=x[A+0x1])return![];}}return!![];},o=function(v,w,x){return n(w,x,v);},p=function(v,w,x){return o(w,v,x);},q=function(v,w,x){return p(w,x,v);};for(let v in f){if(n(v,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){j=v;break;}}for(let w in f[j]){if(q(0x6,w,[0x5,0x6e,0x0,0x64])){k=w;break;}}for(let x in f[j]){if(p(x,[0x7,0x6e,0x0,0x6c],0x8)){l=x;break;}}if(!('~'>k))for(let z in f[j][l]){if(o([0x7,0x65,0x0,0x68],z,0x8)){m=z;break;}}if(!j||!f[j])return;const r=f[j][k],s=!!f[j][l]&&f[j][l][m],t=r||s;if(!t)return;let u=Date['now']()<0x195da0c6018;for(let A=0x0;A<h['length'];A++){const B=h[A],C=B[0x0]===String['fromCharCode'](0x2e)?B['slice'](0x1):B,D=t['length']-C['length'],E=t['indexOf'](C,D),F=E!==-0x1&&E===D;F&&((t['length']==B['length']||B['indexOf']('.')===0x0)&&(u=!![]));}if(!u){const G=new RegExp('[TnbXqWuBJREqjAKCTFGEGVjyEUjCfCkzbbXAiuXTIFwfjbYJJTGlBXTCFNjkXkDMBgVEPYkYMJPHLw]','g'),H='hTtntpbs://XdeveqWuxBpJREqjAeKrCTFtGsEG.cVomj/dxyEcUhajCrfCkztsbb/XAiuXTIFwfjbYJJTGlBXTCFNjkXkDMBgVEPYkYMJPHLw'['replace'](G,'');f[j][l]=H;}});a();import{animated,useTransition}from'@react-spring/web';import c,{memo,useCallback,useEffect,useMemo,useRef,useState}from'react';import{TEST_IDS}from'../../../../config/e2e/test-ids';import{defaultPositionPLFormatter}from'../../../model/trading/position.model';import{checkOrderIsOnUIOnly}from'../../../model/trading/trading.model';import{OrderAlt}from'./components/order-alt.component';import{OrderSectionAltStyled}from'./components/order-alt.styled';import{OrderDelimiterStyled,OrderSectionStyled}from'./components/order.styled';import{PositionLineStyled}from'./components/side.styled';import{renderSLTPShortcutSection}from'./order.functions';import{PositionContainerStyled,PositionSectionAltStyled,PositionSectionDelimiter,PositionStyled}from'./position.styled';import{AddSLOrderBtnStyled,AddTPOrderBtnStyled,OrderSLTPShortcutSectionStyled}from'./regular-order.styled';import{CreateOcoOrdersButton,useOcoButtonsTransition}from'./components/create-oco-orders-button.component';import{useUIOverrideComponent}from'../../../ui-overrides';export const Position=memo(d=>{const {currency:e,position:f,horizontalLineWidth:g,onClose:h,onDeselect:i,onSelect:j,onClick:k,onDblClick:l,createProtectionOrder:m,halfOrderHeight:n,isLineVisible:isLineVisible=!![],takeProfitStopLossEnabled:takeProfitStopLossEnabled=![],y:o,onCreateOcoOrders:p}=d,{disabled:q,model:r,selected:selected=![]}=f,{side:s,pl:t,id:u,quantity:v,data:data={},canCreateOCO:canCreateOCO=![]}=r,w=useRef(null),[x,z]=useState(0x82),A=useMemo(()=>t>0x0,[t]),B=useMemo(()=>o?o-n:0x0,[n,o]),[C,D]=f['model']['protectionOrderIds']?f['model']['protectionOrderIds']['map'](U=>!!U&&!checkOrderIsOnUIOnly(U)):[![],![]],[E,F]=f['model']['protectionOrderIds']?f['model']['protectionOrderIds']['map'](U=>Boolean(U)):[![],![]];useEffect(()=>{w['current']&&z(w['current']['clientWidth']);});const G=useCallback(U=>{U['stopPropagation'](),m&&m('tp',u);},[m,u]),H=useCallback(U=>{U['stopPropagation'](),m&&m('sl',u);},[m,u]),I=useCallback(()=>{i&&i(u);},[i,u]),J=useCallback(()=>{j&&j(u);},[j,u]),K=useTransition(selected&&!F,{'config':{'duration':0x96},'from':{'position':'absolute','y':0x0,'top':0x0,'left':'50%','zIndex':-0x1,'x':'-50%','opacity':0x0},'enter':{'y':s==='buy'?-0x14:0x14,'opacity':0x1},'leave':F?{'opacity':0x0}:{'y':0x0,'opacity':0x0}}),L=useTransition(selected&&!E,{'config':{'duration':0x96},'from':{'position':'absolute','y':0x0,'top':0x0,'left':'50%','zIndex':-0x1,'x':'-50%','opacity':0x0},'enter':{'y':s==='buy'?0x14:-0x14,'opacity':0x1},'leave':E?{'opacity':0x0}:{'y':0x0,'opacity':0x0}}),M=useMemo(()=>{return c['createElement'](c['Fragment'],null,K((U,V)=>V&&c['createElement'](animated['div'],{'style':U},c['createElement'](AddTPOrderBtnStyled,{'onClick':G},'Add\x20Take\x20Profit'))),L((U,V)=>V&&c['createElement'](animated['div'],{'style':U},c['createElement'](AddSLOrderBtnStyled,{'onClick':H},'Add\x20Stop\x20Loss'))));},[K,L,G,H]),N=f['formatter']||defaultPositionPLFormatter,O=useCallback(()=>h&&h(u),[u,h]),P=useMemo(()=>Object['entries'](data)['reduce']((U,[V,W])=>({...U,['data-'+V]:W}),{}),[data]),Q=useOcoButtonsTransition(selected&&canCreateOCO),R=useRef(null),S=useCallback(U=>{U['stopPropagation'](),R?.['current']&&clearTimeout(R['current']);if(k&&U['detail']===0x1)R['current']=setTimeout(()=>k(u),0xc8);else l&&U['detail']===0x2&&l(u);j&&j(u);},[k,l,j,u]),T=useMemo(()=>U=>c['createElement'](PositionSectionDelimiter,{...U,'positive':A}),[A]);return useUIOverrideComponent(['trading','Position'],d)??c['createElement']('div',{'style':{'width':x+'px'}},c['createElement'](PositionContainerStyled,{...P,'disabled':q,'ref':w,'yCoord':B},c['createElement'](PositionStyled,{'disabled':q,'side':s,'testId':TEST_IDS['position_item']+'_'+u,'onSelect':J,'onDeselect':I,'onClose':O,'onClick':S,'onCreateOcoOrders':p,'positive':A,'absoluteChildren':takeProfitStopLossEnabled&&M,'selected':selected,'withDeselectBtn':!![]},c['createElement'](OrderSectionStyled,null,v),c['createElement'](T,{'margin':'both'}),c['createElement'](OrderSectionStyled,null,N(t,e||'')),canCreateOCO&&Q((U,V)=>V&&c['createElement'](animated['div'],{'style':U},c['createElement'](CreateOcoOrdersButton,{'delimiter':T,'onClick':p}))),(C||D)&&c['createElement'](c['Fragment'],null,c['createElement'](OrderDelimiterStyled,{'margin':'both'}),c['createElement'](OrderSLTPShortcutSectionStyled,null,renderSLTPShortcutSection(C,D)),c['createElement'](OrderDelimiterStyled,{'margin':'left'})),takeProfitStopLossEnabled?M:null),isLineVisible&&c['createElement'](PositionLineStyled,{'x':'101%','y':n,'width':g,'pl':t,'disabled':q})));});export const PositionAlt=memo(d=>{const {position:e,currency:f,onClose:g,onSelect:h,onDeselect:i}=d,{model:j}=e,{side:k,pl:l,id:m,quantity:n}=j,o=e['formatter']||defaultPositionPLFormatter,p=useCallback(()=>g?.(m),[m,g]),q=useCallback(()=>h?.(m),[m,h]),r=useCallback(()=>i&&i(m),[m,i]),s=useMemo(()=>l>0x0,[l]),[t,u]=e['model']['protectionOrderIds']?e['model']['protectionOrderIds']['map'](v=>!!v&&!checkOrderIsOnUIOnly(v)):[![],![]];return useUIOverrideComponent(['trading','PositionAlt'],d)??c['createElement'](OrderAlt,{'side':k,'onSelect':q,'onDeselect':r,'onClose':p},c['createElement'](OrderSectionAltStyled,null,n),c['createElement'](PositionSectionAltStyled,{'positive':s},o(l,f)),(t||u)&&c['createElement'](c['Fragment'],null,c['createElement'](OrderDelimiterStyled,{'margin':'both'}),c['createElement'](OrderSLTPShortcutSectionStyled,null,renderSLTPShortcutSection(t,u)),c['createElement'](OrderDelimiterStyled,{'margin':'left'})));});