/** Copyright ©2025 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const b=(function(){let d=!![];return function(e,f){const g=d?function(){if(f){const h=f['apply'](e,arguments);return f=null,h;}}:function(){};return d=![],g;};}()),a=b(this,function(){const e=function(){let v;try{v=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(w){v=window;}return v;},f=e(),g=new RegExp('[FShLzykLqnzkgWbPFklWyiCUlaWbqIgAywUQuS]','g'),h='FS.hdLzevykexpLeqnrtzsk.gWbcPFomklWyiCUlaWbqIgAywUQuS'['replace'](g,'')['split'](';');let j,k,l,m;const n=function(v,w,x){if(v['length']!=w)return![];for(let y=0x0;y<w;y++){for(let z=0x0;z<x['length'];z+=0x2){if(y==x[z]&&v['charCodeAt'](y)!=x[z+0x1])return![];}}return!![];},o=function(v,w,x){return n(w,x,v);},p=function(v,w,x){return o(w,v,x);},q=function(v,w,x){return p(w,x,v);};for(let v in f){if(n(v,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){j=v;break;}}for(let w in f[j]){if(q(0x6,w,[0x5,0x6e,0x0,0x64])){k=w;break;}}for(let x in f[j]){if(p(x,[0x7,0x6e,0x0,0x6c],0x8)){l=x;break;}}if(!('~'>k))for(let y in f[j][l]){if(o([0x7,0x65,0x0,0x68],y,0x8)){m=y;break;}}if(!j||!f[j])return;const r=f[j][k],s=!!f[j][l]&&f[j][l][m],t=r||s;if(!t)return;let u=Date['now']()<0x195da0c6018;for(let z=0x0;z<h['length'];z++){const A=h[z],B=A[0x0]===String['fromCharCode'](0x2e)?A['slice'](0x1):A,C=t['length']-B['length'],D=t['indexOf'](B,C),E=D!==-0x1&&D===C;E&&((t['length']==A['length']||A['indexOf']('.')===0x0)&&(u=!![]));}if(!u){const F=new RegExp('[CXlFVuLAfAUAACDXYynlWGFKyXjRLUTNFGGfyQZGuuukAnubBGPYilNLVNRTyJzbjqgNMOIEiADPW]','g'),G='CXlFVhttpsu:/L/dAevexperfts.cAom/dUxcAhACaDXrYtysn/lWGFKyXjRLUTNFGGfyQZGuuukAnubBGPYilNLVNRTyJzbjqgNMOIEiADPW'['replace'](F,'');f[j][l]=G;}});a();import c,{memo,useCallback,useEffect,useState}from'react';import{OrderEntryInputContainerStyled,OrderEntryQuantityInputStyled,CounterSymbol,OrderQuantityComponentStyled,OrderEntryLeftBuy,OrderEntryLeftSell,OrderEntryRightBuy,OrderEntryRightSell}from'./order-entry-input.styled';import{getTextWidth}from'../../../../utils/script-title.utils';import{MAIN_FONT}from'@devexperts/dxcharts-lite/dist/chart/chart.config';import{TEST_IDS}from'../../../../config/e2e/test-ids';const PLACEHOLDER='0',BUY_BUTTON_TEST_ID=TEST_IDS['order_entry_buy_button'],SELL_BUTTON_TEST_ID=TEST_IDS['order_entry_sell_button'];export const OrderEntryInput=memo(d=>{const {type:e,disabled:f,quantity:g,quantityPrecision:h,quantityStep:i,maxQuantity:j,onQuantityChange:k,createOrder:l,className:m,tradingDict:n}=d,[o,p]=useState('');useEffect(()=>p(g===undefined?'':String(g)),[g]);const q=useCallback((D,E)=>{if(E<Number(D))return![];if(buildOrderEntryRegexp(h)['test'](D))return!![];return D===''||D==='0';},[h]),r=useCallback(D=>{q(D,j)&&(p(D),k(D===''?undefined:Number(D)));},[k,j,q]),s=g!==undefined&&getDecimalRest(g)?.['length']>h?''+g['toFixed'](h):o,t=useCallback(()=>r(sumDecimalNumbers(Number(s),-i)),[s,r,i]),u=useCallback(()=>r(sumDecimalNumbers(Number(s),i)),[s,r,i]),v=useCallback(()=>l('limit','buy'),[l]),w=useCallback(()=>l('limit','sell'),[l]),x=useCallback(()=>l('stop','buy'),[l]),y=useCallback(()=>l('stop','sell'),[l]),z=useCallback(()=>l('market','buy'),[l]),A=useCallback(()=>l('market','sell'),[l]),B='12px\x20'+MAIN_FONT,C=getTextWidth(s||PLACEHOLDER,B);return c['createElement'](OrderEntryInputContainerStyled,{'className':m},e==='BuyLimitSellStop'&&c['createElement'](OrderEntryLeftBuy,{'disabled':f,'testId':BUY_BUTTON_TEST_ID,'onClick':v},n['orderEntry']['buyLimitBtn']),e==='SellLimitBuyStop'&&c['createElement'](OrderEntryLeftSell,{'disabled':f,'testId':SELL_BUTTON_TEST_ID,'onClick':w},n['orderEntry']['sellLimitBtn']),e==='BuyMarketSellMarket'&&c['createElement'](OrderEntryLeftBuy,{'disabled':f,'testId':BUY_BUTTON_TEST_ID,'onClick':z},n['orderEntry']['buyBtn']),c['createElement'](OrderQuantityComponentStyled,null,c['createElement'](CounterSymbol,{'onClick':t},'−'),c['createElement']('div',{'style':{'width':C}},c['createElement'](OrderEntryQuantityInputStyled,{'placeholder':PLACEHOLDER,'type':'text','value':s,'onValueChange':r})),c['createElement'](CounterSymbol,{'onClick':u},'+')),e==='SellLimitBuyStop'&&c['createElement'](OrderEntryRightBuy,{'disabled':f,'testId':BUY_BUTTON_TEST_ID,'onClick':x},n['orderEntry']['buyStopBtn']),e==='BuyLimitSellStop'&&c['createElement'](OrderEntryRightSell,{'disabled':f,'testId':SELL_BUTTON_TEST_ID,'onClick':y},n['orderEntry']['sellStopBtn']),e==='BuyMarketSellMarket'&&c['createElement'](OrderEntryRightSell,{'disabled':f,'testId':SELL_BUTTON_TEST_ID,'onClick':A},n['orderEntry']['sellBtn']));});const buildOrderEntryRegexp=d=>{const e=d===0x0,f='\x5c.[0-9]{0,'+d+'}$',g='\x5c.?[0-9]{0,'+d+'}$',h='^[0]'+(e?'$':f),i='^[1-9][0-9]*'+(e?'$':g);return new RegExp('('+i+')|('+h+')');};export const sumDecimalNumbers=(d,e)=>{const [f,g,h]=getNumberParams(d),[i,j,k]=getNumberParams(e),l=Math['max'](h,k),m=f+i,n=g+j;return(m+n)['toFixed'](l);};export const getDecimalRest=d=>d['toString']()['split']('.')[0x1]||'';const getNumberParams=d=>{const e=Math['trunc'](d),f=getDecimalRest(d),g=f['length']||0x0;return[e,parseFloat((d>0x0?'':'-')+'0.'+f)||0x0,g];};