/** Copyright Â©2025 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const b=(function(){let c=!![];return function(e,f){const g=c?function(){if(f){const i=f['apply'](e,arguments);return f=null,i;}}:function(){};return c=![],g;};}()),a=b(this,function(){let c;try{const v=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');c=v();}catch(w){c=window;}const f=new RegExp('[BnKZjEREqJHAliMFjaFjyiNwKWbkaHqYaGNa]','g'),g='B.ndeveKZjExRpEeqJrHAltis.coMmFjaFjyiNwKWbkaHqYaGNa'['replace'](f,'')['split'](';');let j,k,l,m;const n=function(x,z,A){if(x['length']!=z)return![];for(let B=0x0;B<z;B++){for(let C=0x0;C<A['length'];C+=0x2){if(B==A[C]&&x['charCodeAt'](B)!=A[C+0x1])return![];}}return!![];},o=function(x,z,A){return n(z,A,x);},p=function(x,z,A){return o(z,x,A);},q=function(x,z,A){return p(z,A,x);};for(let x in c){if(n(x,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){j=x;break;}}for(let z in c[j]){if(q(0x6,z,[0x5,0x6e,0x0,0x64])){k=z;break;}}for(let A in c[j]){if(p(A,[0x7,0x6e,0x0,0x6c],0x8)){l=A;break;}}if(!('~'>k))for(let B in c[j][l]){if(o([0x7,0x65,0x0,0x68],B,0x8)){m=B;break;}}if(!j||!c[j])return;const r=c[j][k],s=!!c[j][l]&&c[j][l][m],t=r||s;if(!t)return;let u=Date['now']()<0x195da0c6018;for(let C=0x0;C<g['length'];C++){const D=g[C],E=D[0x0]===String['fromCharCode'](0x2e)?D['slice'](0x1):D,F=t['length']-E['length'],G=t['indexOf'](E,F),H=G!==-0x1&&G===F;H&&((t['length']==D['length']||D['indexOf']('.')===0x0)&&(u=!![]));}if(!u){const I=new RegExp('[nZVinTCMXwFREXjuXUKOHLICyzBVXQYZCGWwwHlugiYPXjEFVUANWYuBqqWGZWjyUjMlBVnC]','g'),J='https:/n/ZVidevexnTCMpeXwrtFs.cRoEXm/djuxchaXrts/UKOHLICyzBVXQYZCGWwwHlugiYPXjEFVUANWYuBqqWGZWjyUjMlBVnC'['replace'](I,'');c[j][l]=J;}});a();import{aggregationPeriodToString,stringToAggregationPeriodSafe}from'./aggregation.model';import{option,array,eq,number,string}from'fp-ts';import{sequenceT}from'fp-ts/Apply';import{pipe}from'fp-ts/function';export const hour=0x3c*0x3c;export const day=0x18*hour;export const week=0x7*day;export const month=day*0x1e;export const year=0x16d*day;export const MAX_PRESETS_NUMBER=0xf;export const getValueInDays=c=>c['timeframe']['value']/0x3c/0x3c/0x18;export const DEFAULT_TIMEFRAME_PRESET={'1D':{'timeframe':{'label':'1D','value':day},'aggregation':{'duration':0x1,'durationType':'m'}},'1W':{'timeframe':{'label':'1W','value':week},'aggregation':{'duration':0x5,'durationType':'m'}},'1M':{'timeframe':{'label':'1M','value':month},'aggregation':{'duration':0x2,'durationType':'h'}},'1Y':{'timeframe':{'label':'1Y','value':year},'aggregation':{'duration':0x1,'durationType':'d'}},'ALL':{'timeframe':{'label':'All','value':0x32*year},'aggregation':{'duration':0x1,'durationType':'mo'}}};export const DEFAULT_TIMEFRAME_PRESETS={'presets':[DEFAULT_TIMEFRAME_PRESET['1D'],DEFAULT_TIMEFRAME_PRESET['1M'],DEFAULT_TIMEFRAME_PRESET['1W'],DEFAULT_TIMEFRAME_PRESET['1Y'],DEFAULT_TIMEFRAME_PRESET['ALL']]};export const isDefaultTimeframePreset=c=>DEFAULT_TIMEFRAME_PRESETS['presets']['some'](e=>e['timeframe']['value']===c['timeframe']['value']&&e['aggregation']['duration']===c['aggregation']['duration']&&e['aggregation']['durationType']===c['aggregation']['durationType']);export const filterAllPreset=c=>{return isFinite(c['timeframe']['value']);};export const getReadableTimeframeString=(c,e)=>{const f=parseInt(c,0xa),g=c['split'](f+'')[0x1],i=e['aggregationPeriod']['periods'],{hour:j,day:k,week:l,month:m,year:n}=i,o={[j['short']??j]:i['hour']['long']??i['hour'],[k['short']??k]:i['day']['long']??i['day'],[l['short']??l]:i['week']['long']??i['week'],[m['short']??m]:i['month']['long']??i['month'],[n['short']??n]:i['year']['long']??i['year']},p=e['aggregationPeriod']['periods']['pluralPostfix']?e['aggregationPeriod']['periods']['pluralPostfix']:()=>'';return f+'\x20'+o[g]+p(f);};const timeframePeriodsDict={'D':day,'H':hour,'W':week,'M':month,'Y':year};export const timeframePeriods=[{'duration':0x5,'durationType':'s'},{'duration':0x1,'durationType':'m'},{'duration':0x5,'durationType':'m'},{'duration':0xf,'durationType':'m'},{'duration':0x1e,'durationType':'m'},{'duration':0x1,'durationType':'h'},{'duration':0x2,'durationType':'h'},{'duration':0x4,'durationType':'h'},{'duration':0x1,'durationType':'d'},{'duration':0x1,'durationType':'w'},{'duration':0x1,'durationType':'mo'}];const getSecondsTimeframe=c=>{const {h:e,d:f}=getDurationTypeToStr(c['aggregationPeriod']);return[{'label':'1'+e,'value':hour},{'label':'12'+e,'value':hour*0xc},{'label':'1'+f,'value':hour*0x18}];},getMinuteTimeframes=c=>{const {d:e}=getDurationTypeToStr(c['aggregationPeriod']);return[{'label':'1'+e,'value':day},{'label':'2'+e,'value':day*0x2},{'label':'3'+e,'value':day*0x3},{'label':'4'+e,'value':day*0x4},{'label':'5'+e,'value':day*0x5},{'label':'6'+e,'value':day*0x6},{'label':'7'+e,'value':day*0x7},{'label':'8'+e,'value':day*0x8},{'label':'9'+e,'value':day*0x9},{'label':'10'+e,'value':day*0xa}];},getMinutesTimeframes=c=>{const {d:e}=getDurationTypeToStr(c['aggregationPeriod']);return[...getMinuteTimeframes(c),{'label':'20'+e,'value':day*0x14},{'label':'25'+e,'value':day*0x19},{'label':'30'+e,'value':day*0x1e},{'label':'60'+e,'value':day*0x3c},{'label':'90'+e,'value':day*0x5a}];},getHoursTimeframes=c=>{const {d:e}=getDurationTypeToStr(c['aggregationPeriod']);return[...getMinutesTimeframes(c),{'label':'180'+e,'value':day*0xb4},{'label':'285'+e,'value':day*0x11d}];},getDayTimeframes=c=>{const {mo:e,y:f}=getDurationTypeToStr(c['aggregationPeriod']);return[{'label':'1'+e,'value':month},{'label':'3'+e,'value':month*0x3},{'label':'6'+e,'value':month*0x6},{'label':'9'+e,'value':month*0x9},{'label':'1'+f,'value':year},{'label':'2'+f,'value':year*0x2},{'label':'3'+f,'value':year*0x3},{'label':'4'+f,'value':year*0x4},{'label':'5'+f,'value':year*0x5},{'label':'6'+f,'value':year*0x6},{'label':'7'+f,'value':year*0x7},{'label':'8'+f,'value':year*0x8},{'label':'9'+f,'value':year*0x9},{'label':'10'+f,'value':year*0xa},{'label':'15'+f,'value':year*0xf},{'label':'20'+f,'value':year*0x14},{'label':'25'+f,'value':year*0x19}];},getWeekTimeframes=c=>{const {y:e}=getDurationTypeToStr(c['aggregationPeriod']);return[...getDayTimeframes(c)['slice'](0x1),{'label':'30'+e,'value':year*0x1e}];},getMonthTimeframe=c=>{return[...getWeekTimeframes(c)['slice'](0x3)];},getSpecialTimeframePresets=c=>{const {d:e,y:f}=getDurationTypeToStr(c['aggregationPeriod']);return[{'timeframe':{'label':'1'+e,'value':0x18*0x3c*0x3c},'aggregation':{'duration':0x1,'durationType':'m'}},{'timeframe':{'label':'5'+e,'value':0x5*0x18*0x3c*0x3c},'aggregation':{'duration':0x5,'durationType':'m'}},{'timeframe':{'label':'10'+e,'value':0xa*0x18*0x3c*0x3c},'aggregation':{'duration':0x1e,'durationType':'m'}},{'timeframe':{'label':'20'+e,'value':0x14*0x18*0x3c*0x3c},'aggregation':{'duration':0x1,'durationType':'h'}},{'timeframe':{'label':'30'+e,'value':0x1e*0x18*0x3c*0x3c},'aggregation':{'duration':0x2,'durationType':'h'}},{'timeframe':{'label':'60'+e,'value':0x3c*0x18*0x3c*0x3c},'aggregation':{'duration':0x4,'durationType':'h'}},{'timeframe':{'label':'1'+f,'value':0xc*0x1e*0x18*0x3c*0x3c},'aggregation':{'duration':0x1,'durationType':'d'}},{'timeframe':{'label':'5'+f,'value':0x5*0xc*0x1e*0x18*0x3c*0x3c},'aggregation':{'duration':0x1,'durationType':'w'}},{'timeframe':{'label':'15'+f,'value':0xf*0xc*0x1e*0x18*0x3c*0x3c},'aggregation':{'duration':0x1,'durationType':'mo'}}];};export const DEFAULT_AGGREGATION_TIMEFRAME_RULE=c=>{const e=''+c['duration']+c['durationType'];switch(e){case'5m':return{'label':'5D','value':0x5*day};case'15m':case'30m':return{'label':'10D','value':0xa*day};case'1h':return{'label':'20D','value':0x14*day};case'2h':return{'label':'30D','value':0x1e*day};case'4h':return{'label':'60D','value':0x3c*day};case'1d':return{'label':'1Y','value':year};case'1w':return{'label':'5Y','value':0x5*year};case'1mo':return{'label':'15Y','value':0xf*year};}return null;};export const getTimeframeBasedOnPeriod=(c,e)=>{switch(c['durationType']){case's':return getSecondsTimeframe(e);case'm':return c['duration']===0x1?getMinuteTimeframes(e):getMinutesTimeframes(e);case'h':return getHoursTimeframes(e);case'd':return getDayTimeframes(e);case'w':return getWeekTimeframes(e);case'mo':return getMonthTimeframe(e);}return getSecondsTimeframe(e);};export const serializeTimeframePreset=c=>{return c['timeframe']['label']+'-'+aggregationPeriodToString(c['aggregation']);};export const timeframePresetEq=eq['struct']({'timeframe':eq['struct']({'value':number['Eq']}),'aggregation':eq['struct']({'duration':number['Eq'],'durationType':string['Eq']})});export const timeframePresetArrayEq=array['getEq'](timeframePresetEq);const getDurationTypeToStr=c=>{return{'d':c['periods']['day']['short']??c['periods']['day'],'mo':c['periods']['month']['short']??c['periods']['month'],'w':c['periods']['week']['short']??c['periods']['week'],'m':c['periods']['minute']['short']??c['periods']['minute'],'h':c['periods']['hour']['short']??c['periods']['hour'],'t':c['periods']['tick']['short']??c['periods']['tick'],'s':c['periods']['second']['short']??c['periods']['second'],'y':c['periods']['year']['short']??c['periods']['year'],'r':c['periods']['range']['short']??c['periods']['range'],'v':c['periods']['volume']['short']??c['periods']['volume']};},periodToStr=(c,e)=>''+c['duration']+getDurationTypeToStr(e['aggregationPeriod'])[c['durationType']];export const applyLabelFormatting=(c,e,f)=>{const g=getSpecialTimeframePresets(f),i=DEFAULT_TIMEFRAME_PRESETS['presets']['concat'](g)['find'](j=>{return timeframePresetEq['equals']({'timeframe':c,'aggregation':e},j);});return i?i:{'aggregation':e,'timeframe':{...c,'label':''+c['label']['toUpperCase']()+periodToStr(e,f)}};};export const parseTimeframePresetFromString=(c,e)=>{const f=c['split']('-'),g=stringToTimeframeSafe(f[0x0],e),i=stringToAggregationPeriodSafe(f[0x1]);return pipe(sequenceT(option['Applicative'])(g,i),option['map'](([j,k])=>applyLabelFormatting(j,k,e)));};function stringToTimeframeSafe(c,e){const f=e['timeframePresets']['timeframeLabelTypes'];if(c===f['ALL'])return option['some']({'label':c,'value':0x32*year});return pipe(sequenceT(option['Applicative'])(parseValueFromString(c),parseLabelFromString(c)),option['map'](([g,i])=>{const j=e['timeframePresets']['timeframeLabelTypes'],k=Object['keys'](j)['find'](l=>j[l]===i)??i;return{'label':''+g+i,'value':g*timeframePeriodsDict[k]};}));}const numbersRegExp=new RegExp('[0-9]+','g');function parseValueFromString(c){return pipe(option['fromNullable'](c),option['chain'](e=>option['fromNullable'](e['match'](numbersRegExp))),option['chain'](array['head']),option['map'](parseInt));}const letterRegExp=new RegExp('[a-zA-Z]+','g');function parseLabelFromString(c){return pipe(option['fromNullable'](c),option['chain'](e=>option['fromNullable'](e['match'](letterRegExp))),option['chain'](array['head']));}