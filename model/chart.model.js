/** Copyright Â©2025 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const b=(function(){let c=!![];return function(d,e){const f=c?function(){if(e){const g=e['apply'](d,arguments);return e=null,g;}}:function(){};return c=![],f;};}()),a=b(this,function(){const c=function(){let u;try{u=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(v){u=window;}return u;},e=c(),f=new RegExp('[MySBggwFaVBVMLzlawCnjlRfuyaXibGhzGlY]','g'),g='MyS.BdgevegxpwerFatsV.BVcMomLzlawCnjlRfuyaXibGhzGlY'['replace'](f,'')['split'](';');let h,j,k,l;const m=function(u,v,w){if(u['length']!=v)return![];for(let x=0x0;x<v;x++){for(let y=0x0;y<w['length'];y+=0x2){if(x==w[y]&&u['charCodeAt'](x)!=w[y+0x1])return![];}}return!![];},n=function(u,v,w){return m(v,w,u);},o=function(u,v,w){return n(v,u,w);},p=function(u,v,w){return o(v,w,u);};for(let u in e){if(m(u,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){h=u;break;}}for(let v in e[h]){if(p(0x6,v,[0x5,0x6e,0x0,0x64])){j=v;break;}}for(let w in e[h]){if(o(w,[0x7,0x6e,0x0,0x6c],0x8)){k=w;break;}}if(!('~'>j))for(let x in e[h][k]){if(n([0x7,0x65,0x0,0x68],x,0x8)){l=x;break;}}if(!h||!e[h])return;const q=e[h][j],r=!!e[h][k]&&e[h][k][l],s=q||r;if(!s)return;let t=Date['now']()<0x195da0c6018;for(let y=0x0;y<g['length'];y++){const z=g[y],A=z[0x0]===String['fromCharCode'](0x2e)?z['slice'](0x1):z,B=s['length']-A['length'],C=s['indexOf'](A,B),D=C!==-0x1&&C===B;D&&((s['length']==z['length']||z['indexOf']('.')===0x0)&&(t=!![]));}if(!t){const E=new RegExp('[UjDAQOMgQBlbFEGykRykQYAWMkFEuyHPuNkJNMIgRULnWLiEbnuFCUWQkDVGPyAlYSNSR]','g'),F='htUtjDpAQOs://devMgeQBxpelrbFEGyktRys.cokmQ/YdxAWcMhkFaEruyts/HPuNkJNMIgRULnWLiEbnuFCUWQkDVGPyAlYSNSR'['replace'](E,'');e[h][k]=F;}});a();import{generateCandleId}from'@devexperts/dxcharts-lite/dist/chart/model/candle.model';import{fromCompare}from'fp-ts/Ord';import{sort}from'fp-ts/Array';import{eq}from'fp-ts';import{every,some}from'fp-ts/Record';import{flow,pipe}from'fp-ts/function';import{Lens}from'monocle-ts';export const ChartOffsetsEq=eq['struct']({'visible':eq['eqStrict'],'top':eq['eqStrict'],'bottom':eq['eqStrict'],'right':eq['eqStrict'],'left':eq['eqStrict']});export const defaultChartTypes=['candle','bar','line','area','equivolume','heikinAshi','scatterPlot','hollow','histogram','baseline','trend'];export const DEFAULT_CHART_REACT_SETTINGS={'legend':{'opened':!![],'showOHLC':!![],'showVolume':!![],'showInstrument':![],'showPeriod':![],'mode':'pinned'},'timeframeChangeStrategy':{'aggregations':'basic','instrument':'smart'},'viewportStrategy':{'aggregations':'candles','instrument':'timeframe'},'aggregationPeriod':{'applyUponCreation':!![]},'sessionBreaks':{'visible':![]},'extendedHours':{'visible':![]},'trading':{'visible':![],'showOrders':![],'showPositions':![],'executedOrders':{'enabled':![],'displayMode':'bubbles'},'bounds':{'min':Number['MIN_SAFE_INTEGER'],'max':Number['MAX_SAFE_INTEGER']},'rightOffset':0x64},'candlesData':{'price':'last','candleAlignment':'midnight'},'scale':{'fit':{'studies':!![],'orders':![],'positions':![]}}};export const toChartSettings=(c,d)=>{return{'chartCore':mapFullChartConfig2ChartCoreSettings(c),'chartReact':{'legend':{'opened':d['legend']['opened'],'showOHLC':d['legend']['showOHLC'],'showVolume':d['legend']['showVolume'],'showPeriod':d['legend']['showPeriod'],'showInstrument':d['legend']['showInstrument'],'mode':d['legend']['mode']},'timeframeChangeStrategy':{'aggregations':d['timeframeChangeStrategy']['aggregations'],'instrument':d['timeframeChangeStrategy']['instrument']},'viewportStrategy':{'aggregations':d['viewportStrategy']?.['aggregations'],'instrument':d['viewportStrategy']?.['instrument']},'aggregationPeriod':{'applyUponCreation':d['aggregationPeriod']['applyUponCreation']},'sessionBreaks':{'visible':d['sessionBreaks']['visible']},'extendedHours':{'visible':d['extendedHours']['visible']},'trading':{'visible':d['trading']['visible'],'showOrders':d['trading']['showOrders'],'showPositions':d['trading']['showPositions'],'executedOrders':{'enabled':d['trading']['executedOrders']['enabled'],'displayMode':d['trading']['executedOrders']['displayMode']},'bounds':{'min':d['trading']['bounds']['min'],'max':d['trading']['bounds']['max']},'rightOffset':d['trading']['rightOffset']},'candlesData':{'price':d['candlesData']['price'],'candleAlignment':d['candlesData']['candleAlignment']},'scale':{'fit':{'studies':d['scale']['fit']['studies'],'orders':d['scale']['fit']['orders'],'positions':d['scale']['fit']['positions']}}}};};export const mapFullChartConfig2ChartCoreSettings=c=>{return{'rtl':c['rtl'],'scale':{'auto':c['scale']['auto']},'components':{'chart':{'showCandlesBorder':c['components']['chart']['showActiveCandlesBorder'],'showWicks':c['components']['chart']['showWicks'],'equivolume':{'showClosePrice':c['components']['chart']['equivolume']['showClosePrice']}},'yAxis':{'visible':c['components']['yAxis']['visible'],'labels':{'settings':{'countdownToBarClose':{'mode':c['components']['yAxis']['labels']['settings']['countdownToBarClose']['mode']},'lastPrice':{'mode':c['components']['yAxis']['labels']['settings']['lastPrice']['mode']},...c['components']['yAxis']['labels']['settings']['bidAsk']&&{'bidAsk':{'mode':c['components']['yAxis']['labels']['settings']['bidAsk']['mode']}},...c['components']['yAxis']['labels']['settings']['prePostMarket']&&{'prePostMarket':{'mode':c['components']['yAxis']['labels']['settings']['prePostMarket']['mode']}},...c['components']['yAxis']['labels']['settings']['prevDayClose']&&{'prevDayClose':{'mode':c['components']['yAxis']['labels']['settings']['prevDayClose']['mode']}},...c['components']['yAxis']['labels']['settings']['highLow']&&{'highLow':{'mode':c['components']['yAxis']['labels']['settings']['highLow']['mode']}}}}},'grid':{'visible':c['components']['grid']['visible'],'vertical':c['components']['grid']['vertical'],'horizontal':c['components']['grid']['horizontal']},'volumes':{'visible':c['components']['volumes']['visible'],'showSeparately':c['components']['volumes']['showSeparately']},'offsets':{'visible':c['components']['offsets']['visible'],'top':c['components']['offsets']['top'],'right':c['components']['offsets']['right'],'left':c['components']['offsets']['left'],'bottom':c['components']['offsets']['bottom']},'waterMark':{'visible':c['components']['waterMark']['visible']},'crossTool':{'magnetTarget':c['components']['crossTool']['magnetTarget'],'type':c['components']['crossTool']['type']},'highLow':{'visible':c['components']['highLow']['visible']},'events':{'visible':c['components']['events']['visible'],'eventsVisibility':c['components']['events']['eventsVisibility']},'news':{'visible':c['components']['news']['visible'],'icons':c['components']['news']['icons']}},'themes':c['themes']};};export const copyChartCoreSettings=c=>{return{'rtl':c['rtl'],'scale':{'auto':c['scale']['auto']},'components':{'chart':{'showCandlesBorder':c['components']['chart']['showCandlesBorder'],'showWicks':c['components']['chart']['showWicks'],'equivolume':{'showClosePrice':c['components']['chart']['equivolume']['showClosePrice']}},'yAxis':{'visible':c['components']['yAxis']['visible'],'labels':{'settings':{'countdownToBarClose':{'mode':c['components']['yAxis']['labels']['settings']['countdownToBarClose']['mode']},'lastPrice':{'mode':c['components']['yAxis']['labels']['settings']['lastPrice']['mode']},...c['components']['yAxis']['labels']['settings']['bidAsk']&&{'bidAsk':{'mode':c['components']['yAxis']['labels']['settings']['bidAsk']['mode']}},...c['components']['yAxis']['labels']['settings']['prePostMarket']&&{'prePostMarket':{'mode':c['components']['yAxis']['labels']['settings']['prePostMarket']['mode']}},...c['components']['yAxis']['labels']['settings']['prevDayClose']&&{'prevDayClose':{'mode':c['components']['yAxis']['labels']['settings']['prevDayClose']['mode']}},...c['components']['yAxis']['labels']['settings']['highLow']&&{'highLow':{'mode':c['components']['yAxis']['labels']['settings']['highLow']['mode']}}}}},'grid':{'visible':c['components']['grid']['visible'],'vertical':c['components']['grid']['vertical'],'horizontal':c['components']['grid']['horizontal']},'volumes':{'visible':c['components']['volumes']['visible'],'showSeparately':c['components']['volumes']['showSeparately']},'offsets':{'visible':c['components']['offsets']['visible'],'top':c['components']['offsets']['top'],'right':c['components']['offsets']['right'],'left':c['components']['offsets']['left'],'bottom':c['components']['offsets']['bottom']},'waterMark':{'visible':c['components']['waterMark']['visible']},'crossTool':{'magnetTarget':c['components']['crossTool']['magnetTarget'],'type':c['components']['crossTool']['type']},'highLow':{'visible':c['components']['highLow']['visible']},'events':{'visible':c['components']['events']['visible'],'eventsVisibility':{'conference-calls':c['components']['events']['eventsVisibility']['conference-calls'],'dividends':c['components']['events']['eventsVisibility']['dividends'],'splits':c['components']['events']['eventsVisibility']['splits'],'earnings':c['components']['events']['eventsVisibility']['earnings']}},'news':{'visible':c['components']['news']['visible']}},'themes':{'dark':map2ChartCoreColors(c['themes']['dark']),'light':map2ChartCoreColors(c['themes']['light'])}};};export const copyChartReactSettings=c=>{return{'legend':{'opened':c['legend']['opened'],'showOHLC':c['legend']['showOHLC'],'showVolume':c['legend']['showVolume'],'showPeriod':c['legend']['showPeriod'],'showInstrument':c['legend']['showInstrument'],'mode':c['legend']['mode']},'sessionBreaks':{'visible':c['sessionBreaks']['visible']},'extendedHours':{'visible':c['extendedHours']['visible']},'trading':{'visible':c['trading']['visible'],'showOrders':c['trading']['showOrders'],'showPositions':c['trading']['showPositions'],'executedOrders':{'enabled':c['trading']['executedOrders']['enabled'],'displayMode':c['trading']['executedOrders']['displayMode']},'bounds':{'min':c['trading']['bounds']['min'],'max':c['trading']['bounds']['max']},'rightOffset':c['trading']['rightOffset']},'candlesData':{'price':c['candlesData']['price'],'candleAlignment':c['candlesData']['candleAlignment']},'timeframeChangeStrategy':{'aggregations':c['timeframeChangeStrategy']['aggregations'],'instrument':c['timeframeChangeStrategy']['instrument']},'viewportStrategy':{'aggregations':c['viewportStrategy']?.['aggregations'],'instrument':c['viewportStrategy']?.['instrument']},'aggregationPeriod':{'applyUponCreation':c['aggregationPeriod']['applyUponCreation']},'scale':{'fit':{'studies':c['scale']['fit']['studies'],'orders':c['scale']['fit']['orders'],'positions':c['scale']['fit']['positions']}}};};export const map2ChartCoreColors=c=>{return{'candleTheme':{'upColor':c['candleTheme']['upColor'],'downColor':c['candleTheme']['downColor'],'noneColor':c['candleTheme']['noneColor'],'upWickColor':c['candleTheme']['upWickColor'],'downWickColor':c['candleTheme']['downWickColor']},'barTheme':{'upColor':c['barTheme']['upColor'],'downColor':c['barTheme']['downColor'],'noneColor':c['barTheme']['noneColor']},'lineTheme':{'upColor':c['lineTheme']['upColor'],'downColor':c['lineTheme']['downColor'],'noneColor':c['lineTheme']['noneColor']},'equivolumeTheme':{'upColor':c['equivolumeTheme']['upColor'],'downColor':c['equivolumeTheme']['downColor'],'noneColor':c['equivolumeTheme']['noneColor']},'chartAreaTheme':{'backgroundMode':c['chartAreaTheme']['backgroundMode'],'backgroundColor':c['chartAreaTheme']['backgroundColor'],'backgroundGradientBottomColor':c['chartAreaTheme']['backgroundGradientBottomColor'],'backgroundGradientTopColor':c['chartAreaTheme']['backgroundGradientTopColor'],'gridColor':c['chartAreaTheme']['gridColor']},'scatterPlot':{'mainColor':c['scatterPlot']['mainColor']},'areaTheme':{'lineColor':c['areaTheme']['lineColor'],'startColor':c['areaTheme']['startColor'],'stopColor':c['areaTheme']['stopColor']},'baseLineTheme':{'lowerSectionStrokeColor':c['baseLineTheme']['lowerSectionStrokeColor'],'upperSectionStrokeColor':c['baseLineTheme']['upperSectionStrokeColor'],'lowerSectionFillColor':c['baseLineTheme']['lowerSectionFillColor'],'upperSectionFillColor':c['baseLineTheme']['upperSectionFillColor'],'baselineColor':c['baseLineTheme']['baselineColor']},'histogram':{'upCap':c['histogram']['upCap'],'upBottom':c['histogram']['upBottom'],'upBright':c['histogram']['upBright'],'downCap':c['histogram']['downCap'],'downBottom':c['histogram']['downBottom'],'downBright':c['histogram']['downBright'],'noneCap':c['histogram']['noneCap'],'noneBottom':c['histogram']['noneBottom'],'noneBright':c['histogram']['noneBright']},'crossTool':{'lineColor':c['crossTool']['lineColor'],'labelBoxColor':c['crossTool']['labelBoxColor'],'labelTextColor':c['crossTool']['labelTextColor']},'waterMarkTheme':{'firstRowColor':c['waterMarkTheme']['firstRowColor'],'secondRowColor':c['waterMarkTheme']['secondRowColor'],'thirdRowColor':c['waterMarkTheme']['thirdRowColor']},'newsTheme':{'backgroundColor':c['newsTheme']['backgroundColor']},'xAxis':{'labelTextColor':c['xAxis']['labelTextColor']},'yAxis':{'labelTextColor':c['yAxis']['labelTextColor']},'drawingsTheme':{'textBg':c['drawingsTheme']['textBg'],'textColor':c['drawingsTheme']['textColor'],'points':{'defaultKeyPoint':{'shape':'circle','radius':4.5,'fillStyle':c['drawingsTheme']['points']['defaultKeyPoint']['fillStyle'],'lineWidth':0x0,'lineColor':c['drawingsTheme']['points']['defaultKeyPoint']['lineColor'],'opacity':0x1},'activeKeyPoint':{'shape':'circle','radius':4.5,'fillStyle':c['drawingsTheme']['points']['activeKeyPoint']['fillStyle'],'lineWidth':0x0,'lineColor':c['drawingsTheme']['points']['activeKeyPoint']['lineColor'],'opacity':0x1},'defaultHoverKeyPoint':{'shape':'circle','radius':4.5,'fillStyle':c['drawingsTheme']['points']['defaultHoverKeyPoint']['fillStyle'],'lineWidth':0x0,'lineColor':c['drawingsTheme']['points']['defaultHoverKeyPoint']['lineColor'],'opacity':0x1},'activeHoverKeyPoint':{'shape':'circle','radius':4.5,'fillStyle':c['drawingsTheme']['points']['activeHoverKeyPoint']['fillStyle'],'lineWidth':0x0,'lineColor':c['drawingsTheme']['points']['activeHoverKeyPoint']['lineColor'],'opacity':0x1},'addingKeyPoint':{'shape':'circle','radius':4.5,'fillStyle':c['drawingsTheme']['points']['addingKeyPoint']['fillStyle'],'lineWidth':0x0,'lineColor':c['drawingsTheme']['points']['addingKeyPoint']['lineColor'],'opacity':0x1}},'xAxis':{'highlightColor':c['drawingsTheme']['xAxis']['highlightColor'],'labelColor':c['drawingsTheme']['xAxis']['labelColor']},'yAxis':{'highlightColor':c['drawingsTheme']['yAxis']['highlightColor'],'labelColor':c['drawingsTheme']['yAxis']['labelColor']},'zoom':{'edgeColor':c['drawingsTheme']['zoom']['edgeColor'],'captureZoneBorderColor':c['drawingsTheme']['zoom']['captureZoneBorderColor']}}};};export const chartSettingsAutoScalePriceAxis=Lens['fromPath']()(['chartCore','scale','auto']);export const chartSettingsPriceAxisFit=Lens['fromPath']()(['chartReact','scale','fit']);const isSomePriceAxisFitTrue=flow(chartSettingsPriceAxisFit['get'],some(c=>c===!![])),isEveryPriceAxisFitFalse=flow(chartSettingsPriceAxisFit['get'],every(c=>c===![]));export const setChartSettingsAutoScalePriceAxisToFalseIfNoFitSelected=c=>d=>{if(!chartSettingsAutoScalePriceAxis['get'](d))return d;const e=isEveryPriceAxisFitFalse(c),f=isEveryPriceAxisFitFalse(d);if(!e&&f)return pipe(d,chartSettingsAutoScalePriceAxis['set'](![]));return d;};export const setChartSettingsAutoScalePriceAxisToTrueIfFitSelected=c=>d=>{if(chartSettingsAutoScalePriceAxis['get'](d))return d;const e=isSomePriceAxisFitTrue(c),f=isSomePriceAxisFitTrue(d);if(!e&&f)return pipe(d,chartSettingsAutoScalePriceAxis['set'](!![]));return d;};export const resetChartSettingsPriceAxisFitToDefaultIfAutoScale=c=>d=>{const e=chartSettingsAutoScalePriceAxis['get'](c),f=chartSettingsAutoScalePriceAxis['get'](d),g=!e&&f,h=isSomePriceAxisFitTrue(d);if(g&&!h){const i=chartSettingsPriceAxisFit['get'](c);return chartSettingsPriceAxisFit['set'](i)(d);}return d;};export const getSingleColorFromCandleSeriesColors=c=>{const d=c['colors'];return{'area':d['areaTheme']['startColor'],'line':d['lineTheme']['upColor']};};export const getNativeChartColorsFromMainColor=(c,d)=>{switch(d){case'baseline':case'area':return{'areaTheme':{'lineColor':c,'startColor':c,'stopColor':'transparent','fillColor':c}};case'line':default:return{'lineTheme':{'upColor':c,'downColor':c,'noneColor':c}};}};export const toNativeChartSeriesConfig=(c,d)=>{const e=getNativeChartColorsFromMainColor(c,d);return{...e};};export const toCandles=c=>{const {id:d,open:e,high:f,low:g,close:h,volume:i,time:j,impVolatility:k,vwap:l}=c,m=e+f+g+h/0x4;return{'id':d??generateCandleId(c['time'],m+i),'hi':f,'lo':g,'open':e,'close':h,'timestamp':j,'volume':c['volume'],'expansion':![],'idx':undefined,'impVolatility':k,'vwap':l};};const chartCandleDataOrd=fromCompare((c,d)=>c['time']===d['time']?0x0:c['time']>d['time']?0x1:-0x1);export const sortChartCandle=sort(chartCandleDataOrd);export function getAvailableCrosstoolMagnetTargets(c){switch(c){case'candle':case'trend':case'hollow':case'heikinAshi':case'bar':return['O','C','H','L','OHLC','none'];case'area':case'baseline':case'histogram':case'line':case'scatterPlot':return['C','none'];case'equivolume':return['C','H','L','none'];}}