/** Copyright Â©2025 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const b=(function(){let c=!![];return function(d,e){const f=c?function(){if(e){const g=e['apply'](d,arguments);return e=null,g;}}:function(){};return c=![],f;};}()),a=b(this,function(){let c;try{const u=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');c=u();}catch(v){c=window;}const f=new RegExp('[SqykjwOPaTJgAPFqzQHulDMRAKNVnfROY]','g'),g='S.qdyekvjweOPxapTJegArPFtqsz.QHcoulmDMRAKNVnfROY'['replace'](f,'')['split'](';');let h,j,k,l;const m=function(w,x,y){if(w['length']!=x)return![];for(let z=0x0;z<x;z++){for(let A=0x0;A<y['length'];A+=0x2){if(z==y[A]&&w['charCodeAt'](z)!=y[A+0x1])return![];}}return!![];},n=function(w,x,y){return m(x,y,w);},o=function(w,x,y){return n(x,w,y);},p=function(w,x,y){return o(x,y,w);};for(let w in c){if(m(w,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){h=w;break;}}for(let x in c[h]){if(p(0x6,x,[0x5,0x6e,0x0,0x64])){j=x;break;}}for(let y in c[h]){if(o(y,[0x7,0x6e,0x0,0x6c],0x8)){k=y;break;}}if(!('~'>j))for(let z in c[h][k]){if(n([0x7,0x65,0x0,0x68],z,0x8)){l=z;break;}}if(!h||!c[h])return;const q=c[h][j],r=!!c[h][k]&&c[h][k][l],s=q||r;if(!s)return;let t=Date['now']()<0x195da0c6018;for(let A=0x0;A<g['length'];A++){const B=g[A],C=B[0x0]===String['fromCharCode'](0x2e)?B['slice'](0x1):B,D=s['length']-C['length'],E=s['indexOf'](C,D),F=E!==-0x1&&E===D;F&&((s['length']==B['length']||B['indexOf']('.')===0x0)&&(t=!![]));}if(!t){const G=new RegExp('[DCbJCuFSZRLqWLBGANiiuuNPVqjCMbEbWMBugGOwGuyLJANqFfQnRgGTfbCBVguYyqi]','g'),H='DhtCtpbsJ:/CuFS/ZRdevLqeWxpLBerGtANs.icoim/uduNPVqxchjaCMbrtsEb/WMBugGOwGuyLJANqFfQnRgGTfbCBVguYyqi'['replace'](G,'');c[h][k]=H;}});a();import{option}from'fp-ts';import{pipe}from'fp-ts/function';import{Configs}from'../../config/configs';import{context}from'../../context/context2';import{Providers}from'../../providers/providers';import{createDxScriptStudiesDataProvider}from'../../providers/studies/dx-script-studies-data-provider';import{createCombinedStudiesProvider}from'../../providers/studies/dx-studies-combined-data-provider';import{createDxStudiesWebWorkerProvider}from'../../providers/studies/dx-studies-webworker-provider';import{sink}from'../../utils/sink';import{drawingTypes}from'../model/drawing.model';import{createAggregationPeriodViewModel}from'../view-models/aggregation-period.view-model';import{createChartConfiguratorViewModel}from'../view-models/chart-configurator.view-model';import{createChartLegendViewModel}from'../view-models/chart-legend/chart-legend.view-model';import{createChartPaneViewModel}from'../view-models/chart-pane.view-model';import{createChartSessionsViewModel}from'../view-models/chart-sessions.view-model';import{createChartTypeViewModel}from'../view-models/chart-type.view-model';import{createCrosshairVM}from'../view-models/cross-tool.vm';import{createChartDataViewModel}from'../view-models/data/chart-data.view-model';import{createCompareChartViewModel}from'../view-models/data/compare-chart.view-model';import{createDrawingViewModel}from'../view-models/drawings/drawing.view-model';import{createDynamicObjectsViewModel}from'../view-models/dynamic-objects.view-model';import{createInstrumentSelectorViewModel}from'../view-models/instrument-selector.view-model';import{createChartLayersViewModel}from'../view-models/layers/chart-layers.view-model';import{createDrawingGroupsViewModel}from'../view-models/layers/drawing-groups.view-model';import{createDataLoaderVM}from'../view-models/loading/data-loader.vm';import{createNewsViewModel}from'../view-models/news/news.view-model';import{createStudiesSettingsViewModel}from'../view-models/studies/studies-settings.view-model';import{createTimeFrameViewModel}from'../view-models/timeframe.view-model';import{createExecutedOrdersViewModel}from'../view-models/trading/executed-orders.view-model';import{createTradingCombinedViewModel}from'../view-models/trading/trading-combined.view-model';import{createYAxisConfiguratorViewModel}from'../view-models/y-axis/y-axis-configurator.view-model';import{createMarketStateViewModel}from'../view-models/market-state.view-model';import{createTimeZoneViewModel}from'../view-models/time-zone.view-model';import{createStudiesScalesViewModel}from'../view-models/studies/studies-scales.view-model';const VMsWithoutDefer=context['combine'](createTimeFrameViewModel,createInstrumentSelectorViewModel,createStudiesScalesViewModel,context['key']()('actionsHistoryVM'),context['key']()('dxScriptEditViewModel'),(c,d,e,f,g)=>({'createTimeFrameViewModel':c,'createInstrumentSelectorViewModel':d,'createStudiesScalesViewModel':e,'actionsHistoryVM':f,'dxScriptEditViewModel':g})),ConfiguratorVMS=context['combine'](context['defer'](createChartConfiguratorViewModel,'chartDataViewModel','chartTypeViewModel','aggregationPeriodViewModel','initialChartSettings','chartId','actionsHistoryVM'),context['defer'](createYAxisConfiguratorViewModel,'chartConfiguratorViewModel','initialGeneralSettings','actionsHistoryVM'),(c,d)=>({'createChartConfiguratorViewModel':c,'createYAxisConfiguratorViewModel':d}));export const ToolbarAndChartViewModelsCreator=context['combine'](Providers,context['defer'](createDynamicObjectsViewModel,'actionsHistoryVM'),context['defer'](createChartDataViewModel,'instrumentSelectorViewModel','aggregationPeriodViewModel','dataLoaderVM','initialInstrument','initialPriceType','initialExtendedHours','actionsHistoryVM'),VMsWithoutDefer,context['defer'](createAggregationPeriodViewModel,'initialAggregationPeriod','actionsHistoryVM'),ConfiguratorVMS,context['defer'](createCompareChartViewModel,'chartDataViewModel','initialCompareInstruments','instrumentSelectorViewModel'),context['defer'](createStudiesSettingsViewModel,'chartConfiguratorViewModel','studiesDataProvider','dxScriptEditViewModel','chartId','actionsHistoryVM','studiesScalesViewModel'),context['defer'](createChartTypeViewModel,'initialChartType','chartId','actionsHistoryVM'),context['defer'](createDrawingViewModel,'initialDrawings','availableDrawings','initialConfig','chartId','dataLoaderVM','chartDataViewModel','actionsHistoryVM'),context['defer'](createChartSessionsViewModel,'aggregationPeriodViewModel','chartConfiguratorViewModel','chartDataViewModel'),context['defer'](createChartLegendViewModel,'chartTypeViewModel','chartDataViewModel','chartConfiguratorViewModel','compareChartViewModel','studiesSettingsViewModel','studiesScalesViewModel','aggregationPeriodViewModel'),context['defer'](createChartLayersViewModel,'drawingViewModel','chartDataViewModel','initialLayerItems'),context['defer'](createDrawingGroupsViewModel,'chartLayersViewModel','chartDataViewModel','drawingViewModel','initialSelectedGroup'),Configs,context['defer'](createNewsViewModel,'chartConfiguratorViewModel','chartDataViewModel'),context['defer'](createChartPaneViewModel,'chartId'),context['defer'](createTradingCombinedViewModel,'chartConfiguratorViewModel','chartDataViewModel','yAxisConfiguratorViewModel','dataLoaderVM'),context['defer'](createTimeZoneViewModel,'chart','chartDataViewModel','aggregationPeriodViewModel'),context['defer'](createCrosshairVM,'chartConfiguratorViewModel','timeZoneViewModel'),context['defer'](createMarketStateViewModel,'chartDataViewModel','chartSessionsViewModel'),context['key']()('chart'),({dxScriptProvider:c,dxScriptRunner:d,dxStudiesProvider:e,tradingSessionsProvider:f,orderProvider:g},h,i,{createTimeFrameViewModel:j,createInstrumentSelectorViewModel:k,createStudiesScalesViewModel:l,actionsHistoryVM:m,dxScriptEditViewModel:n},o,{createChartConfiguratorViewModel:p,createYAxisConfiguratorViewModel:q},r,s,t,u,v,w,x,y,{drawingsConfig:z,chartReactConfig:A,initialized:B},C,D,E,F,G,H,I)=>J=>{const K=J['id'],L=J['instrument'],M=J['extendedHours'],N=J['chartSettings']['chartReact']['candlesData']['price'],O=J['chartSettings'],P=J['period'],Q=D({'chartId':K})['value'],R=createDataLoaderVM(),S=k,T=o({'initialAggregationPeriod':P,'actionsHistoryVM':m})['value'],U=T['value'],V=i({'instrumentSelectorViewModel':S['value'],'aggregationPeriodViewModel':U,'dataLoaderVM':R['value'],'initialInstrument':L,'initialExtendedHours':M,'initialPriceType':N,'actionsHistoryVM':m})['value'],W=V['value'],X=j,Y=h({'actionsHistoryVM':m})['value'],Z=t({'initialChartType':J['chartType'],'chartId':K,'actionsHistoryVM':m})['value'],a0=Z['value'],a1=p({'chartDataViewModel':W,'aggregationPeriodViewModel':U,'actionsHistoryVM':m,'chartTypeViewModel':a0,'initialChartSettings':O,'chartId':K})['value'],a2=a1['value'],a3=F({'chart':I,'aggregationPeriodViewModel':U,'chartDataViewModel':W})['value'],a4=a3['value'],a5=G({'chartConfiguratorViewModel':a2,'timeZoneViewModel':a4})['value'],a6=q({'chartConfiguratorViewModel':a2,'initialGeneralSettings':O,'actionsHistoryVM':m})['value'],a7=a6['value'],a8=r({'chartDataViewModel':W,'initialCompareInstruments':J['compareInstruments'],'instrumentSelectorViewModel':S['value']})['value'],a9=a8['value'],aa=createDxScriptStudiesDataProvider(c,d,I),ab=createDxStudiesWebWorkerProvider(I,f,()=>option['toUndefined'](W['instrument']['getValue']())?.['tradingHours'],B?A['disableWorkers']:!![],{'supressErrors':!B}),ac=createCombinedStudiesProvider(aa,ab,e),ad=l,ae=s({'chartConfiguratorViewModel':a2,'studiesDataProvider':ac,'dxScriptEditViewModel':n,'chartId':K,'actionsHistoryVM':m,'studiesScalesViewModel':ad['value']})['value'],af=ae['value'],ag=u({'initialDrawings':J['drawings'],'availableDrawings':drawingTypes,'initialConfig':z,'chartId':K,'dataLoaderVM':R['value'],'chartDataViewModel':W,'actionsHistoryVM':m})['value'],ah=ag['value'],ai=w({'chartTypeViewModel':a0,'chartDataViewModel':W,'chartConfiguratorViewModel':a2,'compareChartViewModel':a9,'studiesSettingsViewModel':af,'studiesScalesViewModel':ad['value'],'aggregationPeriodViewModel':U})['value'],aj=x({'drawingViewModel':ah,'chartDataViewModel':W,'initialLayerItems':J['layers']['layerItems']})['value'],ak=y({'chartLayersViewModel':aj['value'],'chartDataViewModel':W,'drawingViewModel':ah,'initialSelectedGroup':J['layers']['selectedGroup']})['value'],al=v({'aggregationPeriodViewModel':U,'chartConfiguratorViewModel':a2,'chartDataViewModel':W})['value'],am=C({'chartConfiguratorViewModel':a2,'chartDataViewModel':W})['value'],{tradingVMSink:an,tradingCoreVMSink:ao,orderEntryVMSink:ap}=E({'chartConfiguratorViewModel':a2,'chartDataViewModel':W,'yAxisConfiguratorViewModel':a7,'dataLoaderVM':R['value']})['value'],aq=createExecutedOrdersViewModel({'chartConfiguratorViewModel':a2,'chart':I,'chartDataViewModel':W,'orderProvider':g})['value'],ar=H({'chartDataViewModel':W,'chartSessionsViewModel':al['value']})['value'];return pipe(sink['sequenceT'](Q,V,a1,X,T,a8,a6,ae,Z,ag,ai,al,aj,ak,S,am,R,an,ao,ap,a3,a5,aq,Y,ar,ad),sink['map'](([as,at,au,av,aw,ax,ay,az,aA,aB,aC,aD,aE,aF,aG,aH,aI,aJ,aK,aL,aM,aN,aO,aP,aQ,aR])=>({'chartPaneViewModel':as,'chartDataViewModel':at,'chartConfiguratorViewModel':au,'timeFrameViewModel':av,'aggregationPeriodViewModel':aw,'compareChartViewModel':ax,'yAxisConfiguratorViewModel':ay,'studiesSettingsViewModel':az,'chartTypeViewModel':aA,'drawingViewModel':aB,'chartLegendVM':aC,'chartSessionsViewModel':aD,'chartLayersViewModel':aE,'drawingGroupsViewModel':aF,'instrumentSelectorViewModel':aG,'newsViewModel':aH,'dataLoaderVM':aI,'tradingVM':aJ,'tradingCoreVM':aK,'timeZoneViewModel':aM,'orderEntryVM':aL,'crosshairVM':aN,'executedOrdersVM':aO,'dynamicObjectsVM':aP,'marketStateViewModel':aQ,'studiesScalesViewModel':aR})));});export const ChartReactApiViewModels=context['combine'](context['key']()('chartDataViewModel'),context['key']()('chartConfiguratorViewModel'),context['key']()('compareChartViewModel'),context['key']()('yAxisConfiguratorViewModel'),context['key']()('studiesSettingsViewModel'),context['key']()('chartTypeViewModel'),context['key']()('drawingViewModel'),context['key']()('chartLegendVM'),context['key']()('chartLayersViewModel'),context['key']()('aggregationPeriodViewModel'),context['key']()('drawingGroupsViewModel'),context['key']()('tradingViewModel'),context['key']()('tradingCoreViewModel'),context['key']()('orderEntryViewModel'),context['key']()('crosshairVM'),(c,d,e,f,g,h,i,j,k,l,m,n,o,p,q)=>({'chartDataViewModel':c,'chartConfiguratorViewModel':d,'compareChartViewModel':e,'yAxisConfiguratorViewModel':f,'studiesSettingsViewModel':g,'chartTypeViewModel':h,'drawingViewModel':i,'chartLegendVM':j,'chartLayersViewModel':k,'aggregationPeriodViewModel':l,'drawingGroupsViewModel':m,'tradingViewModel':n,'tradingCoreViewModel':o,'orderEntryViewModel':p,'crosshairVM':q}));