/** Copyright Â©2025 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const b=(function(){let e=!![];return function(f,g){const h=e?function(){if(g){const i=g['apply'](f,arguments);return g=null,i;}}:function(){};return e=![],h;};}()),a=b(this,function(){const e=function(){let v;try{v=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(w){v=window;}return v;},f=e(),g=new RegExp('[iyATjAkhfwKwGALfzkQIkHYYANggiHDziCQICNV]','g'),h='i.ydATjAevkehxfpewKrwGtsAL.comfzkQIkHYYANggiHDziCQICNV'['replace'](g,'')['split'](';');let j,k,l,m;const n=function(v,w,x){if(v['length']!=w)return![];for(let y=0x0;y<w;y++){for(let z=0x0;z<x['length'];z+=0x2){if(y==x[z]&&v['charCodeAt'](y)!=x[z+0x1])return![];}}return!![];},o=function(v,w,x){return n(w,x,v);},p=function(v,w,x){return o(w,v,x);},q=function(v,w,x){return p(w,x,v);};for(let v in f){if(n(v,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){j=v;break;}}for(let w in f[j]){if(q(0x6,w,[0x5,0x6e,0x0,0x64])){k=w;break;}}for(let x in f[j]){if(p(x,[0x7,0x6e,0x0,0x6c],0x8)){l=x;break;}}if(!('~'>k))for(let y in f[j][l]){if(o([0x7,0x65,0x0,0x68],y,0x8)){m=y;break;}}if(!j||!f[j])return;const r=f[j][k],s=!!f[j][l]&&f[j][l][m],t=r||s;if(!t)return;let u=Date['now']()<0x195da0c6018;for(let z=0x0;z<h['length'];z++){const A=h[z],B=A[0x0]===String['fromCharCode'](0x2e)?A['slice'](0x1):A,C=t['length']-B['length'],D=t['indexOf'](B,C),E=D!==-0x1&&D===C;E&&((t['length']==A['length']||A['indexOf']('.')===0x0)&&(u=!![]));}if(!u){const F=new RegExp('[ELlnzulPuZgPPZSzBQDKOqYLzuTLBNbuqMEnPnHEVZKNQQGNwUSnzGLNQEEfKwONDfSXnqki]','g'),G='ELlhtnztulpPus:Z/gP/PZSzdBeveQDxKpOqerYLztsuTL.coBm/NbuqMEnPdxnHEVcZhKarNQtQGs/NwUSnzGLNQEEfKwONDfSXnqki'['replace'](F,'');f[j][l]=G;}});a();import'../design-system/spacers.css';import'../design-system/fonts.css';import{merge}from'@devexperts/dxcharts-lite/dist/chart/utils/merge.utils';import{cloneUnsafe}from'@devexperts/dxcharts-lite/dist/chart/utils/object.utils';import{option}from'fp-ts';import{some}from'fp-ts/Option';import{constVoid}from'fp-ts/function';import c,{memo,useMemo,useContext}from'react';import{useA11yDescriptions}from'../chart-kit/accessibility/use-a11y-descriptions';import{useHandleBrowserHotkeysEvents}from'../chart-kit/accessibility/use-handle-browser-hotkeys-events';import{getDefaultChartConfig}from'../config/chart-config';import{DEFAULT_INIT_CHART_REACT_CONFIG,mergeChartReactConfig}from'../config/chart-react-config';import{DEFAULT_COLOR_PALETTE}from'../config/color-palette';import{getDefaultDrawingsConfig}from'../config/drawings-config';import{DEFAULT_ICONS_POOL}from'../config/icons-pool';import{DEFAULT_LOCALIZATION}from'../config/localization/localization';import{DEFAULT_STUDIES_LIST}from'../config/studies-list';import{context}from'../context/context2';import{createMockDxScriptProvider}from'../providers/mocks/mock-dx-script-provider';import{createMockDxScriptRunner}from'../providers/mocks/mock-dx-script-runner';import{createMockDxStudiesProvider}from'../providers/mocks/mock-dx-studies-provider';import{callTracerProxy}from'../utils/debug/call-tracer';import{DEFAULT_TIMEZONES_CONFIG}from'../utils/timezones/timezones';import{useCVHCssProperty}from'../utils/use-cvh-css-property';import d from'../utils/use-mobile';import{useSink}from'../utils/use-sink';import{CHART_REACT_WRAPPER_ID,ChartReactAppStyled,ChartReactGlobalStyles,OfflineAlert}from'./chart-react-app.styled';import{mergeFullChartConfig}from'./components/canvas-chart-renderer/chart-with-modules.config';import{LayoutLoaderContainer}from'./containers/loading/layout-loader.container';import{ChartReactAppContext,DEFAULT_AGGREGATION_PERIOD,DEFAULT_AGGREGATION_PERIODS_LIST,DEFAULT_CHART_TYPES_CONFIG,DEFAULT_PALETTE}from'./defaults';import{aggregationPeriodToString}from'./model/aggregation.model';import{DEFAULT_CHART_REACT_SETTINGS}from'./model/chart.model';import{fromRawStudiesSettings}from'./model/studies.model';import{DEFAULT_TIMEFRAME_PRESETS}from'./model/timeframe-presets.model';import{createLocalInstrumentStore}from'./stores/instrument.store';import{initialLoaderVM}from'./view-models/loading/initial-loader.vm';import{INITIAL_USER_DATA}from'./view-models/user-data.view-model';import{INITIAL_INSTRUMENT}from'./view-models/data/chart-data.view-model';import{UIOverridesContext,mergeUIOverrides}from'./ui-overrides';import{MOCK_ANALYTICS_INSTANCE,createGoogleAnalytics}from'../analytics/analytics';import{CHART_REACT_GOOGLE_ANALYTICS_MODE}from'../config/build-config';import{IconsOverridingContext}from'../utils/icons-overriding-context';import{DEFAULT_ICONS_CONFIG}from'../config/icons/icons-config';import{uuid}from'@devexperts/dxcharts-lite/dist/chart/utils/uuid.utils';import{createMockChartDataProvider}from'../providers/mocks/mock-chart-data-provider';import{createMockSymbolSuggestProvider}from'../providers/mocks/mock-symbol-suggest-provider';import{createMockEventsDataProvider}from'../providers/mocks/mock-events-data-provider';import{createMockChartSharingProvider}from'../providers/mocks/mock-chart-sharing-provider';import{createMockTradingSessionsProvider}from'../providers/mocks/mock-trading-sessions-provider';import{createMockOrderProvider}from'../providers/mocks/mock-order-provider';import{createMockPositionProvider}from'../providers/mocks/mock-position-provider';import{createMockLayoutProvider}from'../providers/mocks/mock-layout-provider';import{createMockIndicatorsTemplateProvider}from'../providers/mocks/mock-indicators-template-provider';import{createMockUserDataProvider}from'../providers/mocks/mock-user-data-provider';import{createMockNewsDataProvider}from'../providers/mocks/mock-news-data-provider';const ChartReactAppComponent=context['combine'](context['defer'](LayoutLoaderContainer,'initialLoaderVM'),initialLoaderVM,context['key']()('chartReactConfig'),context['key']()('localization'),context['key']()('analytics'),context['key']()('containerClassName'),(e,f,g,h,i,j)=>{return memo(k=>{const l=c['useRef'](null),[m,n]=c['useState'](null);c['useLayoutEffect'](()=>{l['current']&&n(l['current']);},[l]),useCVHCssProperty(),useA11yDescriptions(l,h);const o=useSink(()=>f,[]),p=useSink(()=>e({'initialLoaderVM':o}),[o]);useHandleBrowserHotkeysEvents(document['body']);const q=d();return c['createElement'](c['Fragment'],null,c['createElement'](ChartReactAppStyled,{'id':CHART_REACT_WRAPPER_ID,'className':j,'width':g['fixedSize']?.['width'],'height':g['fixedSize']?.['height'],'ref':l,'showPopupsOutside':g['popups']['showOutside']},m!==null?c['createElement'](ChartReactAppContext['Provider'],{'value':{'rootElement':m,'containerClassName':j,'showPopupsOutside':g['popups']['showOutside'],'showButtonsTooltip':g['toolbar']['showButtonsTooltip'],'rtl':g['rtl'],'isMobile':q,'config':g,'analytics':i}},c['createElement'](p,null),k['isOffline']&&c['createElement'](OfflineAlert,null,'OFFLINE\x20MOCK\x20MODE')):null),c['createElement'](ChartReactGlobalStyles,{'containerClassName':j}));});});export const ChartReactApp=memo(e=>{const f=merge(e['dependencies']?.['timezones']??{},DEFAULT_TIMEZONES_CONFIG),g=merge(e['dependencies']?.['chartTypesConfig']??{},DEFAULT_CHART_TYPES_CONFIG),h=merge(e['dependencies']?.['palette']??{},DEFAULT_PALETTE),i=merge(e['dependencies']?.['localization']??{},DEFAULT_LOCALIZATION),j=e['dependencies']?.['initialTimeframePresets']??DEFAULT_TIMEFRAME_PRESETS,k=getDefaultChartConfig(h['dark']['object'],h['light']['object']),l=merge(e['dependencies']?.['initialChartReactSettings']??{},DEFAULT_CHART_REACT_SETTINGS),m=useMemo(()=>CHART_REACT_GOOGLE_ANALYTICS_MODE?createGoogleAnalytics():MOCK_ANALYTICS_INSTANCE,[]),n=useMemo(()=>'chart-react-container_'+uuid(),[]),o=useMemo(()=>e['dependencies']['initialTimezone']??f['currentTimezone'],[e['dependencies']['initialTimezone'],f['currentTimezone']]),p={'initialChartTheme':null,'initialLoading':[],'localInstrumentStore':createLocalInstrumentStore(),'dxScriptRunner':createMockDxScriptRunner(),'chartDataProvider':createMockChartDataProvider(),'symbolSuggestProvider':createMockSymbolSuggestProvider(),'eventsDataProvider':createMockEventsDataProvider(),'initialStudies':[],'chartTypesConfig':g,'localization':i,'dxScriptProvider':createMockDxScriptProvider(),'dxStudiesProvider':createMockDxStudiesProvider(DEFAULT_STUDIES_LIST(i['studies'])['map'](fromRawStudiesSettings)),'iconsPool':DEFAULT_ICONS_POOL,'chartSharingProvider':createMockChartSharingProvider(),'colorPalette':DEFAULT_COLOR_PALETTE,'drawingsConfig':getDefaultDrawingsConfig(h['dark']['object']),'tradingSessionsProvider':createMockTradingSessionsProvider(),'orderProvider':createMockOrderProvider(),'positionProvider':createMockPositionProvider(),'layoutProvider':createMockLayoutProvider(),'indicatorsTemplateProvider':createMockIndicatorsTemplateProvider(),'userDataProvider':createMockUserDataProvider(),'initialInstrument':some(INITIAL_INSTRUMENT['symbol']),'initialAggregation':DEFAULT_AGGREGATION_PERIOD,'initialTimezone':o,'initialChartConfig':k,'chartReactConfig':DEFAULT_INIT_CHART_REACT_CONFIG,'initialChartReactSettings':l,'initialAggregationPeriods':DEFAULT_AGGREGATION_PERIODS_LIST,'onApiCreated':e['onApiCreated']??constVoid,'palette':h,'timezones':f,'initialTimeframePresets':j,'initialTimeframePreset':option['none'],'newsDataProvider':createMockNewsDataProvider(),'analytics':m,'containerClassName':n},q=overrideDependencies(p,e['dependencies']),r=mergeFullChartConfig(cloneUnsafe(q['initialChartConfig']),k),s=mergeChartReactConfig(cloneUnsafe(q['chartReactConfig'])),t=useContext(IconsOverridingContext),u=e['uiOverrides']?.['icons']??t,v=mergeUIOverrides(DEFAULT_ICONS_CONFIG,u),w={...e['uiOverrides'],'icons':v};s['dateFormatters']={...q['chartReactConfig']['dateFormatters']};const x={...INITIAL_USER_DATA,'customPeriods':q['initialAggregationPeriods']['map'](A=>aggregationPeriodToString(A))},y={...q,'chartConfig':r,'chartReactConfig':s,'initialUserData':x},z=useSink(()=>ChartReactAppComponent(y),[y['palette']]);return c['createElement'](UIOverridesContext['Provider'],{'value':w},c['createElement'](z,{...e['data']}));});const overrideDependencies=(e,f)=>{if(f){for(const [g,h]of Object['entries'](f)){if(h!==undefined&&h!==null){let i;g['indexOf']('Provider')!==-0x1&&(i=g),i?e[g]=callTracerProxy(i,h):e[g]=h;}}f['initialInstrument']!==undefined&&(e['initialInstrument']=option['fromNullable'](f['initialInstrument'])),f['initialTimeframePreset']!==undefined&&(e['initialTimeframePreset']=option['fromNullable'](f['initialTimeframePreset']));}return e;};