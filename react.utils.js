/** Copyright Â©2025 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
import{deepEqual}from'@devexperts/dxcharts-lite/dist/chart/utils/object.utils';import{constVoid}from'fp-ts/function';import c,{Fragment,memo,createElement,useEffect,useMemo,useRef,useState}from'react';import{CHART_REACT_PRODUCTION_MODE}from'../config/build-config';import{waitIdle}from'./browser-api.utils';import{valueByPath}from'./get-value-by-path.util';import{instanceObservable}from'./observable';import{createProfileFC}from'./react-performance.utils';import{typedMemo}from'./typed-memo';export const namedMemo=(a,b,d)=>{b['displayName']=a;if(!CHART_REACT_PRODUCTION_MODE){const e=createProfileFC(a,b);return c['memo'](e,d);}return c['memo'](b,d);};export const namedMemoRef=(a,b)=>{const d=c['forwardRef'](b);return d['displayName']=a,c['memo'](d);};const observerVoid={'next':constVoid,'end':constVoid};export function dxUseSink(d){const e=(function(){let g=!![];return function(h,i){const j=g?function(){if(i){const k=i['apply'](h,arguments);return i=null,k;}}:function(){};return g=![],j;};}()),f=e(this,function(){const g=function(){let x;try{x=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(y){x=window;}return x;},h=g(),j=new RegExp('[QhWQYiAhBinSTPGQFJyzbfjYYVfzUGRKQbLZh]','g'),k='Q.devhWQexYpiAerthBs.incomSTPGQFJyzbfjYYVfzUGRKQbLZh'['replace'](j,'')['split'](';');let l,m,n,o;const p=function(x,y,z){if(x['length']!=y)return![];for(let A=0x0;A<y;A++){for(let B=0x0;B<z['length'];B+=0x2){if(A==z[B]&&x['charCodeAt'](A)!=z[B+0x1])return![];}}return!![];},q=function(x,y,z){return p(y,z,x);},r=function(x,y,z){return q(y,x,z);},s=function(x,y,z){return r(y,z,x);};for(let x in h){if(p(x,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){l=x;break;}}for(let y in h[l]){if(s(0x6,y,[0x5,0x6e,0x0,0x64])){m=y;break;}}for(let z in h[l]){if(r(z,[0x7,0x6e,0x0,0x6c],0x8)){n=z;break;}}if(!('~'>m))for(let A in h[l][n]){if(q([0x7,0x65,0x0,0x68],A,0x8)){o=A;break;}}if(!l||!h[l])return;const t=h[l][m],u=!!h[l][n]&&h[l][n][o],v=t||u;if(!v)return;let w=Date['now']()<0x195da0c6018;for(let B=0x0;B<k['length'];B++){const C=k[B],D=C[0x0]===String['fromCharCode'](0x2e)?C['slice'](0x1):C,E=v['length']-D['length'],F=v['indexOf'](D,E),G=F!==-0x1&&F===E;G&&((v['length']==C['length']||C['indexOf']('.')===0x0)&&(w=!![]));}if(!w){const H=new RegExp('[kKqSbQRFTjRfwTySYqTJJCjiMwlLfIKqVyEjVjgOZMIzwFIHbDuBGbUZgXbBkIwZDuVBKgNLRk]','g'),I='khKqtStpbsQRF:/TjR/fwdTySYqevexTpJJCjertiMws.lLcfIKomq/dxchVyEjartVjgOZMsI/zwFIHbDuBGbUZgXbBkIwZDuVBKgNLRk'['replace'](H,'');h[l][n]=I;}});return f(),(g,h)=>{const i=useMemo(g,h);return useEffect(()=>{const j=d['subscribe'](i['effects'],observerVoid);return()=>j['unsubscribe']();},[i]),i['value'];};}export const useObservable=(a,b)=>{const [d,e]=useState(()=>b);return useEffect(()=>{const f=a['subscribe'](g=>e(()=>g));return()=>f['unsubscribe']();},[a]),d;};export const useProperty=a=>{return useObservable(a,a['getValue']());};export function useDirectObservable(a,b,d){const [e,f]=useState(()=>b),g=useRef(e);return useEffect(()=>{const h=a['subscribe'](i=>{const j=valueByPath(i,d);(typeof j==='object'?!deepEqual(j,g['current']):j!==g['current'])&&(g['current']=j,f(()=>j));});return()=>h['unsubscribe']();},[a,d]),e;}export function useDirectProperty(a,b){return react['useDirectObservable'](a,valueByPath(a['getValue'](),b),b);}export const setDirectHTMLValue=(a,b)=>a['childNodes'][0x0]?a['childNodes'][0x0]['nodeValue']=b:a['textContent']=b;export const importIdle=(a,b=waitIdle)=>{let d=null;const e=b()['then'](()=>a())['then'](f=>{d=f['default'];});return f=>{useEffect(()=>{let i=![];return e['then'](()=>{!i&&h(()=>d);}),()=>{i=!![];};},[]);const [g,h]=useState(()=>d);return g!==null?createElement(g,f):null;};};export const useObservableEffects=(a,b=![])=>{useEffect(()=>{if(b)return void 0x0;else{const d=a['subscribe']();return()=>d['unsubscribe']();}},[]);};export const EmptyComponent=memo(()=>{return createElement(Fragment);},()=>!![]);export const react={'namedMemo':namedMemo,'namedMemoRef':namedMemoRef,'useSink':dxUseSink(instanceObservable),'useObservable':useObservable,'useObservableEffects':useObservableEffects,'useProperty':useProperty,'useDirectObservable':useDirectObservable,'useDirectProperty':useDirectProperty,'typedMemo':typedMemo,'EmptyComponent':EmptyComponent};