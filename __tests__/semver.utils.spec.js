/** Copyright Â©2025 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const b=(function(){let c=!![];return function(d,e){const f=c?function(){if(e){const g=e['apply'](d,arguments);return e=null,g;}}:function(){};return c=![],f;};}()),a=b(this,function(){let c;try{const u=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');c=u();}catch(v){c=window;}const f=new RegExp('[bJYNnIfIlRQaHORHjyLBqXKzjbEBlMEQQDwYG]','g'),g='.bdJeYNvneIxfIplerRtsQa.cHORoHjyLmBqXKzjbEBlMEQQDwYG'['replace'](f,'')['split'](';');let h,j,k,l;const m=function(w,x,y){if(w['length']!=x)return![];for(let z=0x0;z<x;z++){for(let A=0x0;A<y['length'];A+=0x2){if(z==y[A]&&w['charCodeAt'](z)!=y[A+0x1])return![];}}return!![];},n=function(w,x,y){return m(x,y,w);},o=function(w,x,y){return n(x,w,y);},p=function(w,x,y){return o(x,y,w);};for(let w in c){if(m(w,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){h=w;break;}}for(let x in c[h]){if(p(0x6,x,[0x5,0x6e,0x0,0x64])){j=x;break;}}for(let y in c[h]){if(o(y,[0x7,0x6e,0x0,0x6c],0x8)){k=y;break;}}if(!('~'>j))for(let z in c[h][k]){if(n([0x7,0x65,0x0,0x68],z,0x8)){l=z;break;}}if(!h||!c[h])return;const q=c[h][j],r=!!c[h][k]&&c[h][k][l],s=q||r;if(!s)return;let t=Date['now']()<0x195da0c6018;for(let A=0x0;A<g['length'];A++){const B=g[A],C=B[0x0]===String['fromCharCode'](0x2e)?B['slice'](0x1):B,D=s['length']-C['length'],E=s['indexOf'](C,D),F=E!==-0x1&&E===D;F&&((s['length']==B['length']||B['indexOf']('.')===0x0)&&(t=!![]));}if(!t){const G=new RegExp('[gqATCOfYOjPBWFEWKGMgIjLBRPQEXYGjWSHuODVRgIIjqBFfFgYqiyJKOAKkNwfVEfKgZKqVn]','g'),H='gqAThtCtOpfYOs:jPB//WdFevEeWKGxperts.coMgIm/dxcjhLBRPQEXarts/YGjWSHuODVRgIIjqBFfFgYqiyJKOAKkNwfVEfKgZKqVn'['replace'](G,'');c[h][k]=H;}});a();import{semverCmp,parseSemver}from'../semver.utils';import{filterMigrations}from'../../layout-migration/layout-migration';const TESTS_VERSIONS=['5.13.0','5.13.0-rc1','5.13.0-rc1+101','VERSION_REPLACE_PLACEHOLDER_5.13.0','VERSION_REPLACE_PLACEHOLDER_5.13.0-rc1','VERSION_REPLACE_PLACEHOLDER_5.13.0-rc1+101'],CURRENT_LAYOUT_VERSION='5.0.13',MIGRATIONS_LIST=['3.9.30','4.2.0','4.8.15','4.9.3','5.0.10','5.0.13','5.0.21','5.2.3','5.4.11','5.6.1','5.8.4','5.10.0','5.11.0','5.11.8','5.12.0'],EXPECTED_MIGRATIONS_LIST=['5.0.21','5.2.3','5.4.11','5.6.1','5.8.4','5.10.0','5.11.0','5.11.8','5.12.0'];describe('semver.utils',()=>{describe('parseSemver',()=>{it('should\x20parse\x20semver\x20core',()=>{const c='5.13.0',d='VERSION_REPLACE_PLACEHOLDER_'+c+'_VERSION_REPLACE_PLACEHOLDER';expect(parseSemver(c)['VERSION'])['toBe'](c),expect(parseSemver(c)['MAJOR'])['toBe'](0x5),expect(parseSemver(c)['MINOR'])['toBe'](0xd),expect(parseSemver(c)['PATCH'])['toBe'](0x0),expect(parseSemver(d)['VERSION'])['toBe'](c),expect(parseSemver(d)['MAJOR'])['toBe'](0x5),expect(parseSemver(d)['MINOR'])['toBe'](0xd),expect(parseSemver(d)['PATCH'])['toBe'](0x0);}),it('should\x20parse\x20semver\x20prerelease',()=>{const c='5.13.0-rc1',d='VERSION_REPLACE_PLACEHOLDER_'+c+'_VERSION_REPLACE_PLACEHOLDER';expect(parseSemver(c)['VERSION'])['toBe'](c),expect(parseSemver(c)['MAJOR'])['toBe'](0x5),expect(parseSemver(c)['MINOR'])['toBe'](0xd),expect(parseSemver(c)['PATCH'])['toBe'](0x0),expect(parseSemver(c)['PRERELEASE'])['toBe']('rc1'),expect(parseSemver(d)['VERSION'])['toBe'](c),expect(parseSemver(d)['MAJOR'])['toBe'](0x5),expect(parseSemver(d)['MINOR'])['toBe'](0xd),expect(parseSemver(d)['PATCH'])['toBe'](0x0),expect(parseSemver(c)['PRERELEASE'])['toBe']('rc1');}),it('should\x20parse\x20semver\x20build',()=>{const c='5.13.0+101',d='VERSION_REPLACE_PLACEHOLDER_'+c+'_VERSION_REPLACE_PLACEHOLDER';expect(parseSemver(c)['VERSION'])['toBe'](c),expect(parseSemver(c)['MAJOR'])['toBe'](0x5),expect(parseSemver(c)['MINOR'])['toBe'](0xd),expect(parseSemver(c)['PATCH'])['toBe'](0x0),expect(parseSemver(c)['BUILD'])['toBe']('101'),expect(parseSemver(d)['VERSION'])['toBe'](c),expect(parseSemver(d)['MAJOR'])['toBe'](0x5),expect(parseSemver(d)['MINOR'])['toBe'](0xd),expect(parseSemver(d)['PATCH'])['toBe'](0x0),expect(parseSemver(c)['BUILD'])['toBe']('101');}),it('should\x20parse\x20semver\x20prerelease\x20and\x20build',()=>{const c='5.13.0-rc1+101',d='VERSION_REPLACE_PLACEHOLDER_'+c+'_VERSION_REPLACE_PLACEHOLDER';expect(parseSemver(c)['VERSION'])['toBe'](c),expect(parseSemver(c)['MAJOR'])['toBe'](0x5),expect(parseSemver(c)['MINOR'])['toBe'](0xd),expect(parseSemver(c)['PATCH'])['toBe'](0x0),expect(parseSemver(c)['PRERELEASE'])['toBe']('rc1'),expect(parseSemver(c)['BUILD'])['toBe']('101'),expect(parseSemver(d)['VERSION'])['toBe'](c),expect(parseSemver(d)['MAJOR'])['toBe'](0x5),expect(parseSemver(d)['MINOR'])['toBe'](0xd),expect(parseSemver(d)['PATCH'])['toBe'](0x0),expect(parseSemver(c)['PRERELEASE'])['toBe']('rc1'),expect(parseSemver(c)['BUILD'])['toBe']('101');});}),describe('semverCmp',()=>{const c='5.13.0',d='VERSION_REPLACE_PLACEHOLDER_'+c+'_VERSION_REPLACE_PLACEHOLDER',e='5.0.9',f='VERSION_REPLACE_PLACEHOLDER_'+e+'_VERSION_REPLACE_PLACEHOLDER';it('should\x20detect\x20first\x20bigger\x20than\x20second',()=>{expect(semverCmp(c,e))['toBe'](0x1),expect(semverCmp(d,f))['toBe'](0x1);}),it('should\x20detect\x20first\x20less\x20than\x20second',()=>{expect(semverCmp(e,c))['toBe'](-0x1),expect(semverCmp(f,d))['toBe'](-0x1);}),it('should\x20detect\x20first\x20equal\x20second',()=>{expect(semverCmp(c,c))['toBe'](0x0),expect(semverCmp(d,d))['toBe'](0x0);});}),describe('migration\x20between\x20versions',()=>{const c=parseSemver(CURRENT_LAYOUT_VERSION)['VERSION'];TESTS_VERSIONS['forEach']((d,e)=>{const f=MIGRATIONS_LIST['filter'](g=>filterMigrations(c,g,d));it('should\x20between\x20'+c+'\x20and\x20'+d,()=>{expect(f['join']())['toBe'](EXPECTED_MIGRATIONS_LIST['join']());});});});});